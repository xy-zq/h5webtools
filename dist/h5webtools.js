!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("jxcdH5Tools",[],t):"object"==typeof exports?exports.jxcdH5Tools=t():e.jxcdH5Tools=t()}(this,(function(){return i={},e.m=t=[function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function i(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}e.exports=function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,i){"use strict";i.r(t),i.d(t,"commonTools",(function(){return o})),i.d(t,"dragTo",(function(){return a})),i.d(t,"openCamera",(function(){return n}));var o={formatDate:function(e){var t,i,o,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:24,n=new Date(e),c=(a=12==parseInt(a)?12:24,n.getFullYear()),l=(n.getMonth()+1).toString().padStart(2,"0"),d=n.getDate().toString().padStart(2,"0");return n=12==a?(t=(e=n.toLocaleTimeString().split(""))[0]+e[1],e.splice(0,2),i=(e=e.join("").split(":"))[0],o=e[1],e[2]):(i=n.getHours().toString().padStart(2,"0"),o=n.getMinutes().toString().padStart(2,"0"),n.getSeconds().toString().padStart(2,"0")),s&&r?[c,l,d].join(s.toString())+" "+[i,o,n].join(r)+(12==a?" "+t:""):s&&!r?[c,l,d].join(s.toString())+" "+i+"时"+o+"分"+n+"秒"+(12==a?" "+t:""):!s&&r?c+"年"+l+"月"+d+"日 "+[i,o,n].join(r)+(12==a?" "+t:""):c+"年"+l+"月"+d+"日 "+i+"时"+o+"分"+n+"秒"+(12==a?" "+t:"")},CNDateString:function(e){for(var t=["〇","一","二","三","四","五","六","七","八","九"],i=[],o=e.getFullYear().toString(),s=0;s<o.length;s++)t[o.charAt(s)]?i.push(t[o.charAt(s)]):i.push(o.charAt(s));i.push("年");var r=e.getMonth()+1;return r<10?i.push(t[r]):r<20&&i.push("十"+t[r%10]),i.push("月"),(e=e.getDate())<10?i.push(t[e]):e<20?i.push("十"+t[e%10]):i.push("二十"+t[e%10]),i.push("日"),i.join("")},dataURLtoFile:function(e,t){for(var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"file",o=e.split(","),s=(e=o[0].match(/:(.*?);/)[1],atob(o[1])),r=s.length,a=new Uint8Array(r);r--;)a[r]=s.charCodeAt(r);return"blob"==i?new Blob([a],{type:e}):new File([a],t,{type:e})},zipImg:function(e,t,i){var o,s,r;e.file.size>parseInt(t)&&(o=document.createElement("canvas"),s=o.getContext("2d"),(r=new Image).src=e.content,r.onload=function(){"png"==e.file.name.split(".")[1]?(o.width=1600,o.height=900):(o.width=2560,o.height=1440),s.drawImage(r,0,0,o.width,o.height);for(var t=o.toDataURL(e.file.type,i),a=atob(t.split(",")[1]),n=[],c=0;c<a.length;c++)n.push(a.charCodeAt(c));return t=new Blob([new Uint8Array(n)],{type:"image/png"}),new File([t],(new Date).getTime()+".png")})},pauseEvent:function(e){return(e=e||window.event).stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1}},s=(t=i(0),i.n(t)),r=(t=i(1),i.n(t)),a=function(e){return new(function(){function e(t){s()(this,e),this.isMobile=this.isMobile(),this.mobileDragToElem="",this.originElem=document.querySelector("#".concat(t.originElemID)),this.targetElem=document.querySelector("#".concat(t.targetElemID)),this.cloneElem="",this.offsetX="",this.offsetY="",this.duration=t.duration||"",this.timer="",this.callbackSuccess=t.success,this.callbackFail=t.fail,this.initDrag()}return r()(e,[{key:"initDrag",value:function(){this.isMobile?this.originElem.addEventListener("touchstart",this.startDrag.bind(this)):this.originElem.addEventListener("mousedown",this.startDrag.bind(this))}},{key:"startDrag",value:function(e){var t=this;e=e||window.event,this.pauseEvent(e);var i=this.originElem.children,o="";this.timer="",this.finishDrag=this.finishDrag.bind(this),this.isMobile?document.addEventListener("touchend",this.finishDrag):document.addEventListener("mouseup",this.finishDrag);for(var s=0;s<i.length;s++)i[s].contains(e.target)&&(o=i[s],"static"==getComputedStyle(o,null).position&&(o.style.position="relative",o.classList.add("xy_drag_offset_parent")));o&&(this.offsetX=this.calcMouseToElem(event,o)[0]-3,this.offsetY=this.calcMouseToElem(event,o)[1]+3,this.duration?(this.moveMouse=this.moveMouse.bind(this),this.isMobile?document.addEventListener("touchmove",this.moveMouse):document.addEventListener("mousemove",this.moveMouse),this.timer=setTimeout((function(){t.beforeOnDrag(o),t.isMobile?document.removeEventListener("touchmove",t.moveMouse):document.removeEventListener("mousemove",t.moveMouse)}),this.duration)):this.beforeOnDrag(o))}},{key:"moveMouse",value:function(){clearTimeout(this.timer),this.timer=""}},{key:"beforeOnDrag",value:function(e){this.cloneElem=e.cloneNode(!0);var t=this.calcOffset(e)[0]+3,i=this.calcOffset(e)[1]-3;this.cloneElem.style.position="fixed",this.cloneElem.style.zIndex=2,this.cloneElem.style.left=t+"px",this.cloneElem.style.top=i+"px",this.cloneElem.style.width=e.offsetWidth+"px",this.cloneElem.style.height=e.offsetHeight+"px",this.cloneElem.style.margin=0,this.cloneElem.style.cursor="no-drop",this.cloneElem.style.pointerEvents="none",document.oncontextmenu=function(e){return(e=e||window.event).returnValue=!1},this.originElem.appendChild(this.cloneElem),this.onDrag=this.onDrag.bind(this),this.isMobile?document.addEventListener("touchmove",this.onDrag):document.addEventListener("mousemove",this.onDrag)}},{key:"onDrag",value:function(e){e=e||window.event,this.isMobile?(this.cloneElem.style.left=e.targetTouches[0].pageX-this.offsetX+"px",this.cloneElem.style.top=e.targetTouches[0].pageY-this.offsetY+"px",this.mobileDragToElem=document.elementFromPoint(e.targetTouches[0].pageX,e.targetTouches[0].pageY)):(this.cloneElem.style.left=e.pageX-this.offsetX+"px",this.cloneElem.style.top=e.pageY-this.offsetY+"px")}},{key:"finishDrag",value:function(e){if(e=e||window.event,this.pauseEvent(e),clearTimeout(this.timer),this.timer="",this.cloneElem){if(document.oncontextmenu=function(e){return!0},this.isMobile){for(var t=!1;this.mobileDragToElem.tagName&&"HTML"!=this.mobileDragToElem.tagName;){if(this.mobileDragToElem.id==this.targetElem.id){t=!0;break}this.mobileDragToElem=this.mobileDragToElem.parentNode}t?this.callbackSuccess(this.cloneElem):this.callbackFail()}else{var i=!1;for(e=e.target||e.srcElement;"HTML"!=e.tagName;){if(e.id==this.targetElem.id){i=!0;break}e=e.parentNode}i?this.callbackSuccess(this.cloneElem):this.callbackFail()}this.originElem.removeChild(this.cloneElem),delete this.cloneElem,this.isMobile?(document.removeEventListener("touchmove",this.onDrag),document.removeEventListener("touchend",this.finishDrag)):(document.removeEventListener("mousemove",this.onDrag),document.removeEventListener("mouseup",this.finishDrag))}else this.isMobile?(document.removeEventListener("touchmove",this.moveMouse),document.removeEventListener("touchend",this.finishDrag)):(document.removeEventListener("mousemove",this.moveMouse),document.removeEventListener("mouseup",this.finishDrag))}},{key:"calcOffset",value:function(e){if(e.offsetTop){var t=0+e.offsetLeft,i=0+e.offsetTop;return e=e.offsetParent,[t+this.calcOffset(e)[0],i+this.calcOffset(e)[1]]}return[0,0]}},{key:"calcMouseToElem",value:function(e,t){e=e||window.event;var i=0,o=0;if(this.isMobile){for(i=e.targetTouches[0].pageX,o=e.targetTouches[0].pageY,e=e.target||e.srcElement;void 0===e.offsetParent;)e=e.parentNode;if(-1!=e.className.indexOf("xy_drag_offset_parent"))i-=e.offsetLeft,o-=e.offsetTop;else for(e=e.offsetParent;e;)i-=e.offsetLeft,o-=e.offsetTop,e=e.offsetParent}else{var s=e.offsetX,r=e.offsetY;for(e=e.target||e.srcElement;void 0===e.offsetParent;)e=e.parentNode;if(-1!=e.className.indexOf("xy_drag_offset_parent"))i=s,o=r;else{var a=getComputedStyle(e,null);i=s+e.offsetLeft+Number(a.marginLeft.replace("px","")),o=r+e.offsetTop+Number(a.marginTop.replace("px",""));for(e=e.offsetParent;-1==e.className.indexOf("xy_drag_offset_parent");)a=getComputedStyle(e,null),i+=e.offsetLeft+Number(a.marginLeft.replace("px","")),o+=e.offsetTop+Number(a.marginTop.replace("px","")),e=e.offsetParent}}return[i,o]}},{key:"pauseEvent",value:function(e){return(e=e||window.event).stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1}},{key:"isMobile",value:function(){return null!=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}}]),e}())(e)},n=function(e){return new(function(){function e(t){s()(this,e),this.type="video"==t.type?"video":"image",this.isFile=t.isFile,this.facingMode=t.mode||"user",this.audio=t.audio||!1,this.callbackSuccess=t.success,this.cameraBox="",this.video="",this.canvas="",this.context="",this.mediaStreamTrack="",this.shootImage="",this.recorder="",this.chunks=[],this.videoStream="",this.isRecord=!1,this.timer="",this.recordTime="00:00",this.reverseTimes=0,this.init()}return r()(e,[{key:"init",value:function(){var e=this;navigator.mediaDevices||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.getUserMedia?(this.cameraBox=document.createElement("div"),this.cameraBox.className="xy-camera-wrapper",this.cameraBox.innerHTML='<div id="xy-camera-box">\n                    <div class="xy-camera-img-wrapper">\n                      <img class="xy-camera-showImg" />\n                    </div>\n                    <div class="xy-camera-loading">\n                      <svg \n                        version="1.1" \n                        id="loader-1" \n                        xmlns="http://www.w3.org/2000/svg" \n                        xmlns:xlink="http://www.w3.org/1999/xlink" \n                        x="0px" \n                        y="0px" \n                        width="50px" \n                        height="50px" \n                        viewBox="0 0 40 40" \n                        enable-background="new 0 0 40 40" \n                        xml:space="preserve">\n                        <path opacity="0.2" \n                          fill="#fff" \n                          d="M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946\n                            s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634\n                            c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z">\n                        </path>\n                        <path \n                          fill="#000" \n                          d="M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0\n                          C22.32,8.481,24.301,9.057,26.013,10.047z">\n                          <animateTransform \n                            attributeType="xml" \n                            attributeName="transform" \n                            type="rotate" \n                            from="0 20 20" \n                            to="360 20 20" \n                            dur="0.5s" \n                            repeatCount="indefinite">\n                          </animateTransform>\n                        </path>\n                    </svg>\n                    </div>\n                    <div class="xy-camera-video-wrapper">\n                      <video class="xy-camera-showVideo"></video>\n                    </div>\n                    <video class="xy-camera-to-video"></video>\n                    <canvas class="xy-camera-to-canvas" style="display: none;"></canvas>\n                    <div class="xy-camera-close">\n                      <svg viewBox="0 0 15 15"> \n                        <line x1="0" y1="0" x2="15" y2="15"></line>\n                        <line x1="15" y1="0" x2="0" y2="15"></line>\n                      </svg>\n                    </div>\n                    <div class="xy-camera-reverse">\n                     <svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">\n                       <path \n                       id="svg_4" \n                       d="m48.54137,17.35421l-1.76389,3.07485l12.52075,0l-3.13099,-5.46535l-3.1286,-5.46371l-1.64692,2.87903c-3.08659,-1.1374 -6.41405,-1.77395 -9.89364,-1.77395c-16.01633,0 -28.99808,13.08535 -28.99808,29.22843c0,6.69991 2.26083,12.85566 6.02336,17.78767l4.40931,-3.41226c-3.04303,-3.98574 -4.87266,-8.95939 -4.88259,-14.3738c0.02216,-13.05147 10.49841,-23.61217 23.44575,-23.63218l7.04554,1.15126zm15.93224,4.69779l-4.4093,3.4139c3.04226,3.98423 4.8719,8.95474 4.88027,14.37075c-0.02217,13.05136 -10.49841,23.61055 -23.4465,23.63206c-2.29448,-0.00299 -4.48959,-0.37903 -6.58223,-1.00791l1.65988,-2.89298l-12.52069,0l3.12867,5.46232l3.13093,5.46986l1.74554,-3.05319c2.96042,1.03875 6.12881,1.61827 9.43791,1.61978c16.01865,-0.00301 28.99816,-13.08837 29.00192,-29.23147c-0.00376,-6.6999 -2.2662,-12.85415 -6.0264,-17.78312l0,0z" \n                       stroke="#fff" \n                       fill="#fff"/>\n                     </svg>\n                    </div>\n                    <div class="xy-camera-tools">\n                      <div class="xy-camera-tools-cancel">\n                        <svg viewBox="0 0 13 13">\n                          <line x1="0" y1="0" x2="13" y2="13"></line>\n                          <line x1="13" y1="0" x2="0" y2="13"></line>\n                        </svg>\n                      </div>\n                      <div class="xy-camera-tools-shoot">\n                        <span></span>\n                      </div>\n                      <div class="xy-camera-tools-shoot-video">\n                        <div class="video-wrapper">\n                          <span></span>\n                        </div>\n                      </div>\n                      <div class="xy-camera-tools-video-time"></div>\n                      <div class="xy-camera-tools-sure">\n                        <svg viewBox="0 0 20 20">\n                          <polyline points="0 9 2 9 8 14 19 1" fill="none"></polyline>\n                        </svg>\n                      </div>\n                    </div>\n                </img>',this.cameraBox.style.transition="top 0.3s",document.body.style.overflow="hidden",document.body.appendChild(this.cameraBox),this.cameraBox.style.top="100vh",setTimeout((function(){e.cameraBox.style.top="0"})),this.video=document.querySelector(".xy-camera-to-video"),this.canvas=document.querySelector(".xy-camera-to-canvas"),this.context=this.canvas.getContext("2d"),history.pushState(null,null,document.URL),this.closeCamera=this.closeCamera.bind(this),window.history&&window.history.pushState&&window.addEventListener("popstate",this.closeCamera,!1),this.openCamera()):alert("您的浏览器不支持访问用户媒体设备")}},{key:"openCamera",value:function(){"image"==this.type?document.querySelector(".xy-camera-tools-shoot").style.display="block":document.querySelector(".xy-camera-tools-shoot-video").style.display="flex",window.xyCameraIsClosed=!1,this.openSuccess=this.openSuccess.bind(this),this.openFiled=this.openFiled.bind(this),this.getUserMediaToPhoto({audio:this.audio,video:{width:{ideal:1920},height:{ideal:1080},facingMode:this.facingMode,permissions:{"audio-capture":{description:"Required to capture audio using getUserMedia()"},"video-capture":{description:"Required to capture video using getUserMedia()"}}}},this.openSuccess,this.openFiled),document.querySelector(".xy-camera-close").addEventListener("click",this.closeCamera)}},{key:"getUserMediaToPhoto",value:function(e,t,i){navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(e).then(t).catch(i):navigator.webkitGetUserMedia?navigator.webkitGetUserMedia(e,t,i):navigator.mozGetUserMedia?navigator.mozGetUserMedia(e,t,i):navigator.getUserMedia&&navigator.getUserMedia(e,t,i)}},{key:"closeCamera",value:function(){var e=this;document.body.style.overflow="",this.cameraBox.style.top="100vh",this.mediaStreamTrack&&this.mediaStreamTrack.getTracks().forEach((function(e){e.stop()})),document.querySelector(".xy-camera-reverse").removeEventListener("click",this.reverseCamera),window.removeEventListener("popstate",this.closeCamera,!1),window.xyCameraIsClosed=!0,setTimeout((function(){clearInterval(e.timer),e.timer="",document.body.removeChild(e.cameraBox)}),300)}},{key:"openSuccess",value:function(e){var t,i=this;this.mediaStreamTrack=e,window.xyCameraIsClosed&&e.getTracks().forEach((function(e){e.stop()}));try{this.video.srcObject=e}catch(e){}this.video.onloadedmetadata=function(e){document.querySelector(".xy-camera-loading").style.display="none",i.video.play(),"user"==i.facingMode?(document.querySelector(".xy-camera-to-video").classList.add("rotateActive"),document.querySelector(".xy-camera-showVideo").classList.add("rotateActive")):(document.querySelector(".xy-camera-to-video").classList.remove("rotateActive"),document.querySelector(".xy-camera-showVideo").classList.remove("rotateActive")),i.reverseCamera=i.reverseCamera.bind(i),document.querySelector(".xy-camera-reverse").addEventListener("click",i.reverseCamera)},this.video.addEventListener("canplay",(function(){i.canvas.width=this.videoWidth,i.canvas.height=this.videoHeight})),"image"==this.type?(this.getImage=this.getImage.bind(this),document.querySelector(".xy-camera-tools-shoot").addEventListener("click",this.getImage)):(this.recorder=new window.MediaRecorder(this.mediaStreamTrack),(t=this).recorder.ondataavailable=function(e){t.chunks=[],t.chunks.push(e.data),e=new Blob(t.chunks,{type:"video/webm"}),t.videoStream=URL.createObjectURL(e)},this.startRecord=this.startRecord.bind(this),document.querySelector(".xy-camera-tools-shoot-video").addEventListener("click",this.startRecord))}},{key:"openFiled",value:function(e){e&&(e.toString().indexOf("AbortError")?alert("未知错误 AbortError"):e.toString().indexOf("NotAllowedError")?alert("没有权限访问媒体设备 NotAllowedError"):e.toString().indexOf("NotFoundError")?alert("找不到满足请求参数的媒体类型 NotFoundError"):e.toString().indexOf("NotReadableError")?alert("无法读取媒体设备 NotReadableError"):alert(e)),this.closeCamera()}},{key:"reverseCamera",value:function(){this.reverseTimes++,this.facingMode="user"==this.facingMode?"environment":"user",this.mediaStreamTrack.getTracks()[0]&&this.mediaStreamTrack.getTracks()[0].stop(),this.mediaStreamTrack.getTracks()[1]&&this.mediaStreamTrack.getTracks()[1].stop(),document.querySelector(".xy-camera-loading").style.display="flex",document.querySelector(".xy-camera-reverse").removeEventListener("click",this.reverseCamera),document.querySelector(".xy-camera-reverse").style.transform="rotateZ(".concat(180*this.reverseTimes,"deg)"),this.reverseTimes%2!=0?document.querySelector(".xy-camera-reverse").classList.add("active"):document.querySelector(".xy-camera-reverse").classList.remove("active"),this.getUserMediaToPhoto({audio:this.audio,video:{width:{ideal:1920},height:{ideal:1080},facingMode:this.facingMode,permissions:{"audio-capture":{description:"Required to capture audio using getUserMedia()"},"video-capture":{description:"Required to capture video using getUserMedia()"}}}},this.openSuccess,this.openFiled)}},{key:"getImage",value:function(){var e;this.shootImage||("user"==this.facingMode&&(this.context.translate(this.canvas.width,0),this.context.scale(-1,1)),this.context.drawImage(this.video,0,0,this.canvas.width,this.canvas.height),this.shootImage=this.canvas.toDataURL("image/jpg",1),(e=document.querySelector(".xy-camera-showImg")).parentNode.style.display="flex",e.src=this.shootImage,document.querySelector(".xy-camera-tools-cancel").style.display="flex",document.querySelector(".xy-camera-tools-sure").style.display="flex",this.cancel=this.cancel.bind(this),this.save=this.save.bind(this),document.querySelector(".xy-camera-tools-cancel").addEventListener("click",this.cancel),document.querySelector(".xy-camera-tools-sure ").addEventListener("click",this.save))}},{key:"startRecord",value:function(){var e,t,i,o,s=this;this.isRecord||this.videoStream||(t=(e=document.querySelector(".xy-camera-tools-shoot-video")).querySelector("span"),(i=document.querySelector(".xy-camera-tools-video-time")).style.display="block",e.classList.add("active"),t.classList.add("active"),o=1,i.innerText=this.recordTime,this.timer=setInterval((function(){var e=0,t=0;e=parseInt(o/60%60).toString(),t=parseInt(o%60).toString();s.recordTime=e.padStart(2,"0")+":"+t.padStart(2,"0"),o++,i.innerText=s.recordTime,3599==o&&(clearInterval(s.timer),s.timer="")}),1e3),this.isRecord=!0,this.finishRecord=this.finishRecord.bind(this),e.addEventListener("click",this.finishRecord),this.recorder.start())}},{key:"finishRecord",value:function(){var e=this,t=document.querySelector(".xy-camera-tools-shoot-video"),i=t.querySelector("span");t.classList.remove("active"),i.classList.remove("active"),this.isRecord=!1,clearInterval(this.timer),this.timer="",this.recorder.stop(),t.removeEventListener("click",this.finishRecord);var o=document.querySelector(".xy-camera-showVideo");o.parentNode.style.display="flex",setTimeout((function(){o.src=e.videoStream,o.muted=!1,o.loop=!0,o.play()})),document.querySelector(".xy-camera-tools-cancel").style.display="flex",document.querySelector(".xy-camera-tools-sure").style.display="flex",this.cancel=this.cancel.bind(this),this.save=this.save.bind(this),document.querySelector(".xy-camera-tools-cancel").addEventListener("click",this.cancel),document.querySelector(".xy-camera-tools-sure ").addEventListener("click",this.save)}},{key:"cancel",value:function(){document.querySelector(".xy-camera-tools-cancel").style.display="none",document.querySelector(".xy-camera-tools-sure").style.display="none",document.querySelector(".xy-camera-tools-cancel").removeEventListener("click",this.cancel),document.querySelector(".xy-camera-tools-sure ").removeEventListener("click",this.save),"image"==this.type?(document.querySelector(".xy-camera-img-wrapper").style.display="none",this.shootImage=""):(document.querySelector(".xy-camera-tools-video-time").style.display="none",document.querySelector(".xy-camera-video-wrapper").style.display="none",clearInterval(this.timer),this.timer="",this.isRecord=!1,this.chunks=[],this.videoStream="",this.recordTime="00:00")}},{key:"save",value:function(){var e,t;document.querySelector(".xy-camera-tools-cancel").style.display="none",document.querySelector(".xy-camera-tools-sure").style.display="none",document.querySelector(".xy-camera-tools-cancel").removeEventListener("click",this.cancel),document.querySelector(".xy-camera-tools-sure ").removeEventListener("click",this.save),"image"==this.type?(document.querySelector(".xy-camera-img-wrapper").style.display="none",document.querySelector(".xy-camera-tools-shoot").removeEventListener("click",this.getImage),this.isFile?this.callbackSuccess(this.dataURLtoFile(this.shootImage,(new Date).getTime()+Math.random().toString().substr(3,5))):this.callbackSuccess(this.shootImage),this.shootImage=""):(document.querySelector(".xy-camera-tools-shoot-video").removeEventListener("click",this.startRecord),document.querySelector(".xy-camera-video-wrapper").style.display="none",e=new Blob(this.chunks,{type:"video/webm"}),"",t=new window.File([e],(new Date).getTime()+Math.random().toString().substr(3,5),{type:e.type}),this.callbackSuccess(t),this.chunks=[]),this.closeCamera()}},{key:"dataURLtoFile",value:function(e,t){for(var i=e.split(","),o=(e=i[0].match(/:(.*?);/)[1],atob(i[1])),s=o.length,r=new Uint8Array(s);s--;)r[s]=o.charCodeAt(s);return new File([r],t,{type:e})}}]),e}())(e)};i(3)},function(e,t){}],e.c=i,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:o})},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var s in t)e.d(o,s,function(e){return t[e]}.bind(null,s));return o},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.p="",e(e.s=2);function e(o){if(i[o])return i[o].exports;var s=i[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var t,i}));